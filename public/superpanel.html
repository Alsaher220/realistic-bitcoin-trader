<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="card">
    <h2>Admin Panel</h2>
    <input type="password" id="adminPass" placeholder="Admin Password" />
    <input type="text" id="targetUser" placeholder="Target Username" />
    <input type="number" id="cashUpdate" placeholder="Cash Amount" />
    <input type="number" id="btcUpdate" placeholder="BTC Amount" step="0.01" />
    <button onclick="updateUser()">Update User</button>
    <p id="adminResult"></p>
  </div>

  <script>
    async function updateUser() {
      let password = document.getElementById("adminPass").value;
      let username = document.getElementById("targetUser").value;
      let cash = document.getElementById("cashUpdate").value;
      let btc = document.getElementById("btcUpdate").value;

      let res = await fetch("/api/admin/update", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          username,
          cash: cash ? parseFloat(cash) : undefined,
          btc: btc ? parseFloat(btc) : undefined,
          password
        })
      });

      let data = await res.json();
      if (res.ok) {
        document.getElementById("adminResult").innerText = "✅ Updated " + JSON.stringify(data.user);
      } else {
        document.getElementById("adminResult").innerText = "❌ " + (data.error || "Update failed");
      }
    }
  </script>
</body>
</html>
